# Инструмент для преобразования конфигураций (Transpiler)

---

## 1. Общее описание
Данный проект реализует инструмент командной строки для преобразования конфигурационных файлов, написанных в формате TOML, в специализированный формат, подобный Lisp-подобному синтаксису. Инструмент принимает входной файл TOML, обрабатывает его, вычисляет значения для выражений на этапе трансляции, и выводит результат в стандартный вывод.

Конфигурации могут включать объявления констант, выражения, массивы и вложенные словари. При этом поддерживаются арифметические операции и преобразования строк. Проект включает тесты, покрывающие все основные конструкции языка.

---

## 2. Функции и настройки
### Основные функции
- **Преобразование конфигураций в специальный формат:**
    - Парсинг входного файла TOML.
    - Вывод результата в формат, основанный на Lisp-подобном синтаксисе, с поддержкой объявлений переменных, выражений, массивов и словарей.

- **Обработка константных выражений**:
  - Поддержка вычислений выражений, заключённых в =.
  - Поддержка арифметических операций: +, -, *, /.
  - Поддержка вызова функций в выражениях.
    
- **Объявление переменных:**
  - Использование ключевого слова const для объявления констант.
      
- **Поддержка массивов и словарей:** 
  - Массивы записываются в формате (list ...).
  - Словари записываются в формате $[...] и могут быть вложенными.

- **Обработка строк и выражений:** 
  - Строки преобразуются в обычные строки без кавычек, если это не IP-адрес.
  - Выражения, начинающиеся с =, преобразуются в специальный формат с |...|.
  
  
### Пример синтаксиса
````
  *> Однострочный комментарий
[const]
name = "example"
value = 42
numbers = [1, 2, 3]
config = { host = "localhost", port = 8080 }

$[
    key1 : value,
    key2 : (list 1 2 3),
    key3 : $[ nestedKey : "nestedValue" ]
]

 ````

### Основные компоненты

1. **Парсер (```transpile.py```)**

- Цель: Преобразует входной TOML в специфический формат, поддерживающий константы, массивы, словари и выражения.


2. **Тесты:**

- Проект включает тесты для проверки корректности работы преобразования и обработки ошибок.

## 3. Сборка и запуск

Для работы с проектом требуется Python версии 3.6 или выше. Инструкция по запуску:

1. **Запуск трансляции:**

    Чтобы выполнить преобразование конфигурации из TOML в специализированный формат, используйте следующую команду:

    ```bash
    python transpile.py < input.toml >
    ```


2. **Запуск тестов:**

    Для выполнения тестов, которые проверяют корректность работы программы, используйте модуль `unittest`:

    ```bash
    python -m unittest test_transpile.py
    ```

    Это выполнит все тесты, указанные в `test_transpile.py`, и выведет результат на экран.

---

## 4. Примеры использования

### Пример 1: Конфигурация базы данных
**Входной файл ```input.toml```:**

```plaintext
[const]
name = "example"
value = 42
```
**Команда для запуска:**

```batch
python transpile.py input.toml
```
**Результат работы программы:**

![image](https://github.com/user-attachments/assets/b2b0d4ee-f95b-401b-9010-d122355b32db)


### Пример 2: Конфигурация графического интерфейса
**Входной файл ```input2.toml```:**

```plaintext
[const]
numbers = [1, 2, 3]
config = { host = "localhost", port = 8080 }
```
**Команда для запуска:**

```batch
python transpile.py input2.toml
```
**Результат работы программы:**

![image](https://github.com/user-attachments/assets/4e972b63-97db-469a-a469-33da6ec37193)


### Пример 3: Использование всех операций и функции ```pow()```
**Входной файл ```input3.toml```:**

```plaintext
[const]
base = 10
increment = "= base + 5"
sorted_list = "= sort([5, 3, 8, 1])"
server = { host = "127.0.0.1", port = 8080 }
```
**Команда для запуска:**

```batch
python transpile.py input3.toml

```
**Результат работы программы):**

![image](https://github.com/user-attachments/assets/fa468b71-c666-4371-8687-103c02b2c49f)

## 5. Результаты прогона тестов
**Все тестовые файлы успешно обработаны, что подтверждает корректность работы всех функций транслятора.**

**Вывод тестирования (```test_transpile.py```):**

````
python -m unittest test_transpile.py
````

![image](https://github.com/user-attachments/assets/bcfc84d4-79cd-4733-be7d-bd8884fae7de)


### Проверка корректности результатов
- Содержит простые константы.
- Отражает корректное преобразование массивов и вложенных словарей.
- Показывает обработку выражений и функций.
- Демонстрирует работу с вложенными структурами и вычислениями.

 **Все тесты прошли успешно, подтверждая полное соответствие функционала требованиям задания.**

## 6. Ошибки и их обработка

###Программа выводит сообщения об ошибках, если:
- **Некорректные имена переменных:**
  - Если имя переменной не соответствует шаблону ^[a-z][a-z0-9_]*$, программа завершится с ошибкой.
- **Синтаксические ошибки в TOML-файле:**
  - Если входной TOML-файл содержит синтаксические ошибки, программа завершится с соответствующим сообщением.
- **Недопустимые операции в выражениях:**
  - Если выражение содержит неподдерживаемые операции или функции, программа завершится с ошибкой.




